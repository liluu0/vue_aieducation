{"ast":null,"code":"import { Message } from 'element3';\nimport { reqAllDiscussions, reqAddDiscussion } from '@/api';\nexport default {\n  data() {\n    return {\n      discussNum: 0,\n      discussData: {\n        title: '',\n        content: ''\n      },\n      allDiscussions: []\n    };\n  },\n  mounted() {\n    this.loadAllDiscussions();\n  },\n  methods: {\n    addDiscuss() {\n      console.log('gund');\n      // 使用$refs来获取ref引用的元素\n      // const bottomElement = this.$refs.bottomElement;\n\n      // 滚动到底部元素\n      // bottomElement.scrollIntoView({ behavior: 'smooth' });\n    },\n    async loadAllDiscussions() {\n      try {\n        const res = await reqAllDiscussions(this.$route.params.courseId);\n        this.discussNum = res.data.data.length;\n        this.allDiscussions = res.data.data;\n        console.log(this.discussNum, this.allDiscussions);\n      } catch (error) {\n        console.log('reqAllDiscussions', error);\n      }\n    },\n    async createDiscuss() {\n      if (this.discussData.title && this.discussData.content) {\n        try {\n          console.log('发布', this.discussData);\n          const res = await reqAddDiscussion(this.$route.params.courseId, this.discussData);\n          this.discussData.title = '';\n          this.discussData.content = '';\n          // console.log(res.data);\n          Message({\n            message: '发布成功',\n            type: 'success'\n          });\n          this.loadAllDiscussions();\n        } catch (error) {\n          console.log('reqAddDiscussion', error);\n        }\n      } else {\n        Message('信息不能为空哦~');\n      }\n    }\n  }\n};","map":{"version":3,"names":["Message","reqAllDiscussions","reqAddDiscussion","data","discussNum","discussData","title","content","allDiscussions","mounted","loadAllDiscussions","methods","addDiscuss","console","log","res","$route","params","courseId","length","error","createDiscuss","message","type"],"sources":["D:\\代码\\vscodeProjects\\AiEducation\\vue_aieducation\\src\\components\\discussion\\index.vue"],"sourcesContent":["<template>\r\n    <div class=\"discussAll\">\r\n  \r\n    <div class=\"discussArea\">\r\n      <div class=\"btn_group\" tabindex=\"-1\" aria-hidden=\"true\">\r\n              <div class=\"search-box\">\r\n                        <el-input placeholder=\"请输入内容\" \r\n                        v-model=\"input\"\r\n                        prefix-icon=\"el-icon-search\"\r\n                        clearable> </el-input>\r\n              </div> \r\n              \r\n         <el-button @click=\"addClass\" type=\"primary\" plain round> + 添加讨论</el-button>\r\n      </div>\r\n  \r\n      <div class=\"alltopic clearfix\">\r\n      <ul class=\"breadcrumb\">\r\n          <li class=\"active\">\r\n              <span>共<b>{{this.discussNum}}</b>条讨论</span>\r\n          </li>\r\n      </ul>\r\n      </div>\r\n      \r\n      \r\n      <div class=\"dataCon\">\r\n          <div v-if=\"!this.discussNum\" class=\"dataCon_empty\" style=\"\">\r\n              <span>本课程还没有讨论哦，快去发布一个吧～</span>\r\n          </div>\r\n  \r\n          <div v-else>\r\n           <ul class=\"dataBody\">\r\n            <li v-for=\"(item,index) in this.allDiscussions\" :key=\"index\" class=\"dataBody_td dataBody_topic\">\r\n                <div class=\"dataBody_file\">\r\n                <img :src=\"item.image\">\r\n                </div>\r\n                    <div class=\"dataBody_right\">\r\n                        <div class=\"topicli_head\">\r\n                        <p class=\"topicli_head_left\">\r\n                            <span class=\"author\">{{item.name}}</span>\r\n                            <span class=\"time\">{{item.commentTime}}</span>\r\n                        </p>\r\n                        </div>\r\n                        <div class=\"topicli_title\">\r\n                            <span class=\"topicli_title_text\">{{item.title}}</span>\r\n                        </div>\r\n                    </div>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- 背景margin -->\r\n    <div class=\"bgmargin\">\r\n    </div>\r\n              \r\n    <div>\r\n  \r\n      <div class=\"editContainer\" ref=\"bottomElement\">\r\n          <div class=\"edit_headTitle\" @click=\"addDiscuss\">新建讨论</div> \r\n          <div class=\"edit_main\">\r\n              <div class=\"edit_target\">\r\n                  <span class=\"fl\">发布给</span> \r\n                  <div class=\"fl selectClass-disabled\">\r\n                      <b class=\"color000\">2022软件1班</b>\r\n                  </div>\r\n              </div> \r\n              <div class=\"edit_title\">\r\n                  <input type=\"text\" name=\"title\" v-model=\"this.discussData.title\" placeholder=\"请输入标题...\" autocomplete=\"off\">\r\n                  <div class=\"deit_content\">\r\n                      \r\n                      <textarea class=\"chandler-content_input-area\" v-model=\"this.discussData.content\" placeholder=\"请输入讨论内容...\"></textarea>\r\n                      <br>\r\n                  <el-button @click=\"createDiscuss\" type=\"primary\" plain round> 发 布 </el-button>\r\n                  </div>\r\n              </div>\r\n          </div>\r\n      </div>\r\n  \r\n  \r\n    </div>\r\n    </div>\r\n</template>\r\n  \r\n<script>\r\nimport { Message } from 'element3'\r\nimport {reqAllDiscussions,reqAddDiscussion} from '@/api'\r\nexport default {\r\n    data () {\r\n      return {\r\n        discussNum:0,\r\n        discussData:{\r\n          title:'',\r\n          content:''\r\n        },\r\n        allDiscussions:[]\r\n      }\r\n    },\r\n    mounted() {\r\n      this.loadAllDiscussions()\r\n    },\r\n    methods: {\r\n        addDiscuss(){\r\n            console.log('gund');\r\n            // 使用$refs来获取ref引用的元素\r\n            // const bottomElement = this.$refs.bottomElement;\r\n            \r\n            // 滚动到底部元素\r\n            // bottomElement.scrollIntoView({ behavior: 'smooth' });\r\n        },\r\n      async loadAllDiscussions(){\r\n        try {\r\n          const res = await reqAllDiscussions(this.$route.params.courseId)\r\n          this.discussNum = res.data.data.length\r\n          this.allDiscussions = res.data.data\r\n          console.log(this.discussNum,this.allDiscussions);\r\n          \r\n        } catch (error) {\r\n          console.log('reqAllDiscussions',error);\r\n        }\r\n\r\n      },\r\n      async createDiscuss(){\r\n        if(this.discussData.title&&this.discussData.content){\r\n          try {\r\n            console.log('发布',this.discussData);\r\n            const res = await reqAddDiscussion(this.$route.params.courseId,this.discussData)\r\n            this.discussData.title = ''\r\n            this.discussData.content = ''\r\n            // console.log(res.data);\r\n            Message({\r\n            message: '发布成功',\r\n            type: 'success'\r\n          })\r\n          this.loadAllDiscussions()\r\n          } catch (error) {\r\n            console.log('reqAddDiscussion',error);            \r\n          }\r\n        }else{\r\n            Message('信息不能为空哦~')\r\n        }\r\n      }\r\n    },\r\n    \r\n  \r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  /* 讨论列表 */\r\n  .dataBody_td:after {\r\n      content: \"\";\r\n      position: absolute;\r\n      left: 30px;\r\n      right: 30px;\r\n      bottom: 0;\r\n      border-bottom: solid 1px #F2F2F2;\r\n  }\r\n  .topicli_title .topicli_title_text {\r\n      display: inline-block;\r\n      vertical-align: middle;\r\n      max-width: calc(100% - 330px);\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n      overflow: hidden;\r\n      margin-right: 10px;\r\n      color: #131B26;\r\n  }\r\n  .topicli_title {\r\n      font-size: 16px;\r\n      line-height: 22px;\r\n      color: #131B26;\r\n      cursor: pointer;\r\n  }\r\n  .time {\r\n      display: inline-block;\r\n      vertical-align: middle;\r\n      margin-left: 10px;\r\n      font-size: 12px;\r\n      color: #8A8B99;\r\n  }\r\n  .topicli_head .author {\r\n      max-width: 75px;\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n      overflow: hidden;\r\n  }\r\n  .author {\r\n    font-weight: bold;\r\n      display: inline-block;\r\n      vertical-align: middle;\r\n      font-size: 14px;\r\n      color: #8A8B99;\r\n      margin-right: 6px;\r\n  }\r\n  .topicli_head {\r\n      position: relative;\r\n      line-height: 30px;\r\n      margin-bottom: 10px;\r\n  }\r\n  .dataBody_topic .dataBody_right {\r\n      margin-left: 44px;\r\n  }\r\n  .dataBody_topic .dataBody_file img {\r\n      width: 30px;\r\n      height: 30px;\r\n      border-radius: 50%;\r\n  }\r\n  .dataBody_topic .dataBody_file {\r\n      height: 30px;\r\n      margin-right: 10px;\r\n      top: 0;\r\n  }\r\n  \r\n  .dataBody_file {\r\n      position: relative;\r\n      float: left;\r\n      height: 30px;\r\n      top: 3px;\r\n      margin-right: 14px;\r\n      z-index: 3;\r\n  }\r\n  .dataBody_topic {\r\n      padding: 20px 30px 10px;\r\n  }\r\n  .dataBody_td {\r\n      position: relative;\r\n      float: none;\r\n      min-height: 54px;\r\n      padding: 20px 10px 30px;\r\n      font-size: 12px;\r\n      color: #474C59;\r\n      box-sizing: border-box;\r\n  }\r\n  \r\n  ul, ol, li {\r\n      list-style-type: none;\r\n  }\r\n  /* .deit_content {\r\n   background-color: red;\r\n  } */\r\n  .chandler-content_input-area {\r\n  \r\n      display: inline-block;\r\n      padding: 5px 14px;\r\n      border: 1px solid #D5D7D9;\r\n      border-radius: 4px;\r\n      margin: 15px 0px;\r\n  \r\n      width: 100%;\r\n      height: 11vh;\r\n      max-height: 250px;\r\n      min-height: 250px;\r\n      color: #413659;\r\n      font-size: 14px;\r\n      line-height: 22px;\r\n      outline: none;\r\n      box-sizing: border-box;\r\n      background: transparent;\r\n  }\r\n  .fl {\r\n      float: left;\r\n  }\r\n  .color000 {\r\n      color: #000;\r\n  }\r\n  /* 新建讨论 */\r\n  .editContainer {\r\n      position: relative;\r\n      padding: 30px 30px 40px;\r\n      min-height: 500px;\r\n  }\r\n  .editContainer .edit_headTitle {\r\n      font-size: 18px;\r\n      color: #131B26;\r\n      font-weight: bold;\r\n      line-height: 28px;\r\n      padding-bottom: 20px;\r\n  }\r\n  .editContainer .edit_target {\r\n      height: 30px;\r\n      line-height: 30px;\r\n      margin-bottom: 10px;\r\n      font-size: 14px;\r\n      color: #8A8B99;\r\n  }\r\n  .editContainer .edit_target .selectClass-disabled {\r\n      margin-left: 14px;\r\n      font-size: 14px;\r\n  }\r\n  .editContainer .edit_title {\r\n      background: #fff;\r\n      margin-bottom: 15px;\r\n  }\r\n  .editContainer .edit_title input {\r\n      display: block;\r\n      width: 100%;\r\n      height: 42px;\r\n      padding: 0 14px;\r\n      font-size: 14px;\r\n      border: 1px solid #D5D7D9;\r\n      border-radius: 4px;\r\n      box-sizing: border-box;\r\n      caret-color: #3A8BFF;\r\n      margin: 15px 0;\r\n  }\r\n  \r\n  /* 分界 */\r\n  .clearfix:after {\r\n      content: \" \";\r\n      display: block;\r\n      height: 0px;\r\n      clear: both;\r\n  }\r\n  \r\n  ul, ol, li {\r\n      list-style-type: none;\r\n  }\r\n  .alltopic {\r\n      border-bottom: 1px solid #dcdfe6;\r\n      padding-bottom: 10px;\r\n  }\r\n  .alltopic .breadcrumb {\r\n      float: left;\r\n      max-width: 60%;\r\n  }\r\n  .breadcrumb {\r\n      width: 100%;\r\n      padding: 15px 0 0 10px;\r\n      box-sizing: border-box;\r\n  }\r\n  .breadcrumb>li.active {\r\n      color: #8A8B99;\r\n      background-color: #fff;\r\n  }\r\n  .btn_group::after {\r\n  content: \"\";\r\n  display: block;\r\n  clear:both;\r\n  }\r\n  .search-box {\r\n              cursor: pointer;\r\n              transition: all 0.3s ease;\r\n              padding: 0;\r\n              float: left;\r\n  }\r\n  .el-input__inner {\r\n      border-radius: 20px;\r\n      border: 2px solid #dcdfe6;\r\n      width: 287px;\r\n  }\r\n  .el-button--small, .el-button--small.is-round {\r\n      padding: 0;\r\n      width: 104px;\r\n      height: 36px;\r\n      float: right;\r\n      margin-left: 30px;\r\n  }\r\n  \r\n  /* 话题 */\r\n  .dataCon {\r\n      min-height: 400px;\r\n  }\r\n  .dataCon_empty {\r\n      height: 180px;\r\n      font-size: 14px;\r\n      color: #a8a8b3;\r\n      text-align: center;\r\n      position: absolute;\r\n      top: 26%;\r\n      left: 50%;\r\n      transform: translate(-50%, -50%);\r\n  }\r\n  .dataCon_empty span {\r\n      display: inline-block;\r\n      vertical-align: middle;\r\n  }\r\n  .bgmargin {\r\n      height: 20px;\r\n      background-color: #efefef;\r\n      width: 107%;\r\n      margin-left: -30px;\r\n  }\r\n  </style>"],"mappings":"AAqFA,SAASA,OAAM,QAAS,UAAS;AACjC,SAAQC,iBAAiB,EAACC,gBAAgB,QAAO,OAAM;AACvD,eAAe;EACXC,IAAGA,CAAA,EAAK;IACN,OAAO;MACLC,UAAU,EAAC,CAAC;MACZC,WAAW,EAAC;QACVC,KAAK,EAAC,EAAE;QACRC,OAAO,EAAC;MACV,CAAC;MACDC,cAAc,EAAC;IACjB;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,kBAAkB,CAAC;EAC1B,CAAC;EACDC,OAAO,EAAE;IACLC,UAAUA,CAAA,EAAE;MACRC,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;MACnB;MACA;;MAEA;MACA;IACJ,CAAC;IACH,MAAMJ,kBAAkBA,CAAA,EAAE;MACxB,IAAI;QACF,MAAMK,GAAE,GAAI,MAAMd,iBAAiB,CAAC,IAAI,CAACe,MAAM,CAACC,MAAM,CAACC,QAAQ;QAC/D,IAAI,CAACd,UAAS,GAAIW,GAAG,CAACZ,IAAI,CAACA,IAAI,CAACgB,MAAK;QACrC,IAAI,CAACX,cAAa,GAAIO,GAAG,CAACZ,IAAI,CAACA,IAAG;QAClCU,OAAO,CAACC,GAAG,CAAC,IAAI,CAACV,UAAU,EAAC,IAAI,CAACI,cAAc,CAAC;MAElD,EAAE,OAAOY,KAAK,EAAE;QACdP,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAACM,KAAK,CAAC;MACxC;IAEF,CAAC;IACD,MAAMC,aAAaA,CAAA,EAAE;MACnB,IAAG,IAAI,CAAChB,WAAW,CAACC,KAAK,IAAE,IAAI,CAACD,WAAW,CAACE,OAAO,EAAC;QAClD,IAAI;UACFM,OAAO,CAACC,GAAG,CAAC,IAAI,EAAC,IAAI,CAACT,WAAW,CAAC;UAClC,MAAMU,GAAE,GAAI,MAAMb,gBAAgB,CAAC,IAAI,CAACc,MAAM,CAACC,MAAM,CAACC,QAAQ,EAAC,IAAI,CAACb,WAAW;UAC/E,IAAI,CAACA,WAAW,CAACC,KAAI,GAAI,EAAC;UAC1B,IAAI,CAACD,WAAW,CAACE,OAAM,GAAI,EAAC;UAC5B;UACAP,OAAO,CAAC;YACRsB,OAAO,EAAE,MAAM;YACfC,IAAI,EAAE;UACR,CAAC;UACD,IAAI,CAACb,kBAAkB,CAAC;QACxB,EAAE,OAAOU,KAAK,EAAE;UACdP,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAACM,KAAK,CAAC;QACvC;MACF,CAAC,MAAI;QACDpB,OAAO,CAAC,UAAU;MACtB;IACF;EACF;AAGF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}